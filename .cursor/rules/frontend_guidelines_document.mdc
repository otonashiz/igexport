---
description:
globs:
alwaysApply: false
---
# IGExportGuru - å‰ç«¯å¼€å‘æŒ‡å—

## ğŸ“ é¡¹ç›®ç»“æ„

### ç›®å½•ç»„ç»‡
```
src/
â”œâ”€â”€ components/           # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/              # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Table.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ features/        # åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ExportForm/
â”‚   â”‚   â”œâ”€â”€ DataPreview/
â”‚   â”‚   â”œâ”€â”€ LanguageSwitch/
â”‚   â”‚   â””â”€â”€ ProgressBar/
â”‚   â””â”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”œâ”€â”€ Footer.tsx
â”‚       â””â”€â”€ MainLayout.tsx
â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useInstagramData.ts
â”‚   â”œâ”€â”€ useLanguage.ts
â”‚   â””â”€â”€ useExport.ts
â”œâ”€â”€ stores/              # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ appStore.ts
â”‚   â”œâ”€â”€ exportStore.ts
â”‚   â””â”€â”€ languageStore.ts
â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ instagram.ts
â”‚   â”œâ”€â”€ export.ts
â”‚   â””â”€â”€ common.ts
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ validation.ts
â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”œâ”€â”€ constants.ts
â”‚   â””â”€â”€ api.ts
â”œâ”€â”€ locales/             # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json
â”‚   â”œâ”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ zh-TW.json
â”‚   â”œâ”€â”€ it.json
â”‚   â””â”€â”€ es.json
â”œâ”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ components.css
â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ main.tsx             # åº”ç”¨å…¥å£
â””â”€â”€ vite-env.d.ts        # Viteç±»å‹å£°æ˜
```

## ğŸ¯ ç»„ä»¶è®¾è®¡åŸåˆ™

### ç»„ä»¶åˆ†ç±»
1. **åŸºç¡€UIç»„ä»¶** (`components/ui/`)
   - å®Œå…¨å¯å¤ç”¨
   - æ— ä¸šåŠ¡é€»è¾‘
   - åªé€šè¿‡propsæ¥æ”¶æ•°æ®
   - ç¬¦åˆè®¾è®¡ç³»ç»Ÿè§„èŒƒ

2. **åŠŸèƒ½ç»„ä»¶** (`components/features/`)
   - åŒ…å«ä¸šåŠ¡é€»è¾‘
   - å¯èƒ½è¿æ¥çŠ¶æ€ç®¡ç†
   - ç‰¹å®šåŠŸèƒ½å¯¼å‘

3. **å¸ƒå±€ç»„ä»¶** (`components/layout/`)
   - é¡µé¢ç»“æ„ç»„ä»¶
   - å¤„ç†æ•´ä½“å¸ƒå±€é€»è¾‘

### ç»„ä»¶å‘½åè§„èŒƒ
- ä½¿ç”¨PascalCaseï¼š`ExportForm`ã€`DataPreview`
- ç»„ä»¶æ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´ï¼š`Button.tsx`
- ç›®å½•ä½¿ç”¨PascalCaseï¼š`ExportForm/`

### ç»„ä»¶æ¨¡æ¿
```typescript
// components/ui/Button.tsx
import React from 'react';
import { cva, type VariantProps } from 'class-variance-authority';

const buttonVariants = cva(
  // åŸºç¡€æ ·å¼
  "inline-flex items-center justify-center rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2",
  {
    variants: {
      variant: {
        primary: "bg-gradient-to-r from-instagram-orange to-instagram-pink text-white hover:scale-[1.02] hover:shadow-lg",
        secondary: "border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",
        ghost: "text-gray-700 hover:bg-gray-100",
      },
      size: {
        sm: "h-9 px-3 text-sm",
        md: "h-11 px-4 text-base",
        lg: "h-12 px-6 text-lg",
      },
    },
    defaultVariants: {
      variant: "primary",
      size: "md",
    },
  }
);

interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  children: React.ReactNode;
  loading?: boolean;
}

export const Button: React.FC<ButtonProps> = ({
  className,
  variant,
  size,
  children,
  loading,
  disabled,
  ...props
}) => {
  return (
    <button
      className={buttonVariants({ variant, size, className })}
      disabled={disabled || loading}
      {...props}
    >
      {loading && (
        <i className="fas fa-spinner fa-spin mr-2" aria-hidden="true" />
      )}
      {children}
    </button>
  );
};
```

## ğŸ“Š çŠ¶æ€ç®¡ç†è§„èŒƒ

### Zustand Storeç»“æ„
```typescript
// stores/exportStore.ts
import { create } from 'zustand';
import { InstagramUser, ExportType } from '@/types/instagram';

interface ExportState {
  // çŠ¶æ€
  username: string;
  exportType: ExportType;
  data: InstagramUser[];
  isLoading: boolean;
  progress: number;
  error: string | null;
  
  // åŠ¨ä½œ
  setUsername: (username: string) => void;
  setExportType: (type: ExportType) => void;
  setData: (data: InstagramUser[]) => void;
  setLoading: (loading: boolean) => void;
  setProgress: (progress: number) => void;
  setError: (error: string | null) => void;
  reset: () => void;
}

export const useExportStore = create<ExportState>((set) => ({
  // åˆå§‹çŠ¶æ€
  username: '',
  exportType: 'followers',
  data: [],
  isLoading: false,
  progress: 0,
  error: null,
  
  // åŠ¨ä½œå®ç°
  setUsername: (username) => set({ username }),
  setExportType: (exportType) => set({ exportType }),
  setData: (data) => set({ data }),
  setLoading: (isLoading) => set({ isLoading }),
  setProgress: (progress) => set({ progress }),
  setError: (error) => set({ error }),
  reset: () => set({
    username: '',
    exportType: 'followers',
    data: [],
    isLoading: false,
    progress: 0,
    error: null,
  }),
}));
```

### Storeä½¿ç”¨è§„èŒƒ
- æ¯ä¸ªStoreä¸“æ³¨å•ä¸€èŒè´£
- ä½¿ç”¨TypeScriptä¸¥æ ¼ç±»å‹
- åŠ¨ä½œå‡½æ•°ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼š`setXxx`ã€`updateXxx`ã€`resetXxx`
- é¿å…åœ¨Storeä¸­ç›´æ¥è¿›è¡ŒAPIè°ƒç”¨

## ğŸ¨ æ ·å¼è§„èŒƒ

### Tailwind CSSä½¿ç”¨åŸåˆ™
1. **ä¼˜å…ˆä½¿ç”¨Tailwindç±»**
   ```tsx
   // âœ… æ¨è
   <div className="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
   
   // âŒ é¿å…
   <div style={{display: 'flex', alignItems: 'center'}}>
   ```

2. **å“åº”å¼è®¾è®¡**
   ```tsx
   // ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
   <div className="w-full md:w-1/2 lg:w-1/3 xl:w-1/4">
     <div className="text-sm md:text-base lg:text-lg">
   ```

3. **è‡ªå®šä¹‰CSSç±»**
   ```css
   /* styles/components.css */
   @layer components {
     .btn-instagram {
       @apply bg-gradient-to-r from-instagram-orange to-instagram-pink text-white font-medium py-3 px-6 rounded-lg hover:scale-[1.02] transition-all duration-150;
     }
     
     .input-field {
       @apply w-full h-11 px-4 border border-gray-300 rounded-lg focus:border-instagram-pink focus:ring-2 focus:ring-instagram-pink/20 transition-colors;
     }
   }
   ```

### è®¾è®¡ä»¤ç‰Œ
```typescript
// utils/constants.ts
export const DESIGN_TOKENS = {
  colors: {
    instagram: {
      pink: '#E4405F',
      purple: '#833AB4',
      orange: '#F77737',
      gradient: 'linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)',
    },
    neutral: {
      50: '#FAFAFA',
      100: '#F5F5F5',
      200: '#E5E5E5',
      300: '#D4D4D4',
      400: '#A3A3A3',
      500: '#737373',
      600: '#525252',
      700: '#404040',
      800: '#262626',
      900: '#171717',
    },
  },
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    '2xl': '48px',
    '3xl': '64px',
  },
  borderRadius: {
    sm: '4px',
    md: '8px',
    lg: '12px',
    xl: '16px',
    full: '9999px',
  },
};
```

## ğŸ”§ TypeScriptè§„èŒƒ

### ç±»å‹å®šä¹‰
```typescript
// types/instagram.ts
export interface InstagramUser {
  id: string;
  userName: string;
  fullName: string;
  profileUrl: string;
  isVerified: boolean;
  followerCount?: number;
  followingCount?: number;
  profilePicUrl?: string;
}

export type ExportType = 'followers' | 'following';

export interface ExportOptions {
  username: string;
  type: ExportType;
  maxCount: number;
}

export interface ExportResult {
  data: InstagramUser[];
  totalCount: number;
  exportedCount: number;
  timestamp: Date;
}

// types/common.ts
export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
}

export interface PaginationParams {
  page: number;
  limit: number;
}
```

### ç»„ä»¶Propsç±»å‹
```typescript
// åŸºç¡€Props
interface BaseComponentProps {
  className?: string;
  children?: React.ReactNode;
}

// æ‰©å±•Props
interface ButtonProps extends BaseComponentProps {
  variant?: 'primary' | 'secondary' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean;
  onClick?: () => void;
}

// æ³›å‹Props
interface TableProps<T> extends BaseComponentProps {
  data: T[];
  columns: TableColumn<T>[];
  onRowClick?: (item: T) => void;
}
```

## ğŸŒ å›½é™…åŒ–è§„èŒƒ

### ç¿»è¯‘æ–‡ä»¶ç»“æ„
```json
// locales/en.json
{
  "common": {
    "loading": "Loading...",
    "error": "Error",
    "success": "Success",
    "cancel": "Cancel",
    "confirm": "Confirm"
  },
  "header": {
    "title": "IGExportGuru",
    "subtitle": "Export Instagram Lists Effortlessly"
  },
  "export": {
    "inputPlaceholder": "Enter Instagram username or URL",
    "followers": "Followers",
    "following": "Following",
    "exportButton": "Export (Max {{maxCount}} users)",
    "progress": "Processing... {{progress}}%",
    "downloadReady": "Download ready!"
  },
  "table": {
    "username": "Username",
    "fullName": "Full Name",
    "verified": "Verified",
    "profile": "Profile"
  },
  "errors": {
    "invalidUsername": "Please enter a valid Instagram username",
    "networkError": "Network error. Please try again.",
    "noData": "No data found for this user"
  }
}
```

### i18n Hookä½¿ç”¨
```typescript
// hooks/useLanguage.ts
import { useTranslation } from 'react-i18next';

export const useLanguage = () => {
  const { t, i18n } = useTranslation();
  
  const changeLanguage = (lang: string) => {
    i18n.changeLanguage(lang);
    localStorage.setItem('language', lang);
  };
  
  return {
    t,
    currentLanguage: i18n.language,
    changeLanguage,
    languages: [
      { code: 'en', name: 'English' },
      { code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡' },
      { code: 'zh-TW', name: 'ç¹é«”ä¸­æ–‡' },
      { code: 'it', name: 'Italiano' },
      { code: 'es', name: 'EspaÃ±ol' },
    ],
  };
};

// ç»„ä»¶ä¸­ä½¿ç”¨
const ExportForm = () => {
  const { t } = useLanguage();
  
  return (
    <div>
      <input placeholder={t('export.inputPlaceholder')} />
      <button>{t('export.exportButton', { maxCount: 200 })}</button>
    </div>
  );
};
```

## ğŸ”’ æ€§èƒ½ä¼˜åŒ–

### ç»„ä»¶ä¼˜åŒ–
```typescript
// ä½¿ç”¨React.memo
export const DataRow = React.memo<DataRowProps>(({ user, onClick }) => {
  return (
    <tr onClick={() => onClick(user)}>
      <td>{user.userName}</td>
      <td>{user.fullName}</td>
    </tr>
  );
});

// ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
const DataPreview = ({ data }: { data: InstagramUser[] }) => {
  const sortedData = useMemo(() => {
    return data.sort((a, b) => a.userName.localeCompare(b.userName));
  }, [data]);
  
  const stats = useMemo(() => ({
    total: data.length,
    verified: data.filter(user => user.isVerified).length,
  }), [data]);
  
  return (
    <div>
      <p>Total: {stats.total}, Verified: {stats.verified}</p>
      {sortedData.map(user => <DataRow key={user.id} user={user} />)}
    </div>
  );
};

// ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
const ExportForm = () => {
  const [username, setUsername] = useState('');
  
  const handleSubmit = useCallback((e: FormEvent) => {
    e.preventDefault();
    // å¤„ç†æäº¤é€»è¾‘
  }, [username]);
  
  return <form onSubmit={handleSubmit}>...</form>;
};
```

### æ‡’åŠ è½½
```typescript
// è·¯ç”±æ‡’åŠ è½½
const DataPreview = lazy(() => import('@/components/features/DataPreview'));

// ç»„ä»¶ä¸­ä½¿ç”¨Suspense
<Suspense fallback={<div>Loading...</div>}>
  <DataPreview data={data} />
</Suspense>
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### ç»„ä»¶æµ‹è¯•
```typescript
// __tests__/Button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from '@/components/ui/Button';

describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByRole('button')).toHaveTextContent('Click me');
  });
  
  it('calls onClick when clicked', () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    
    fireEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });
  
  it('shows loading state', () => {
    render(<Button loading>Click me</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
    expect(screen.getByRole('button')).toHaveClass('fa-spinner');
  });
});
```

## ğŸ“ ä»£ç è´¨é‡

### ESLinté…ç½®
```json
// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off",
    "@typescript-eslint/no-unused-vars": "error",
    "prefer-const": "error",
    "no-var": "error"
  }
}
```

### Gitæäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼åŒ–
refactor: é‡æ„
test: æµ‹è¯•
chore: æ„å»ºå·¥å…·æˆ–ä¾èµ–æ›´æ–°

ç¤ºä¾‹:
feat(export): add progress bar for data export
fix(ui): resolve button loading state issue
docs(readme): update installation instructions
```

---

*æœ€åæ›´æ–°: 2024å¹´12æœˆ*
*ç‰ˆæœ¬: v1.0*
