---
description:
globs:
alwaysApply: false
---
# IGExportGuru - Cursoré¡¹ç›®è§„åˆ™

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°
IGExportGuruæ˜¯ä¸€ä¸ªInstagramå…³æ³¨è€…/å…³æ³¨åˆ—è¡¨å¯¼å‡ºå·¥å…·ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼Œä½¿ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆæ„å»ºã€‚

## ğŸ“š é¡¹ç›®æ–‡æ¡£å‚è€ƒ
åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹æ–‡æ¡£ï¼š
- `.cursor/rules/prd_document.mdc` - äº§å“éœ€æ±‚è¯´æ˜æ–‡æ¡£
- `.cursor/rules/tech_stack_document.mdc` - æŠ€æœ¯æ ˆè¯´æ˜æ–‡æ¡£
- `.cursor/rules/frontend_guidelines_document.mdc` - å‰ç«¯å¼€å‘æŒ‡å—
- `.cursor/rules/backend_structure.mdc` - åç«¯æ¶æ„æ–‡æ¡£
- `.cursor/rules/implementation_plan.mdc` - å®æ–½è®¡åˆ’æ–‡æ¡£

## ğŸ¯ æ ¸å¿ƒå¼€å‘åŸåˆ™

### 1. ä»£ç è´¨é‡åŸåˆ™
- **å¯è¯»æ€§ä¼˜å…ˆ**: ä»£ç å¿…é¡»æ¸…æ™°æ˜“æ‡‚ï¼Œä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å‘½å
- **ç±»å‹å®‰å…¨**: 100% TypeScriptè¦†ç›–ç‡ï¼Œä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **ä¸€è‡´æ€§**: éµå¾ªç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œå‘½åè§„èŒƒ
- **å¯ç»´æŠ¤æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä½è€¦åˆé«˜å†…èš

### 2. ç”¨æˆ·ä½“éªŒåŸåˆ™
- **æ€§èƒ½ç¬¬ä¸€**: é¦–å±åŠ è½½<2ç§’ï¼Œäº¤äº’å“åº”<100ms
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ‰€æœ‰è®¾å¤‡ï¼ˆæ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢ï¼‰
- **æ— éšœç¢è®¿é—®**: ç¬¦åˆWCAGæ ‡å‡†
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒ5ç§è¯­è¨€ï¼Œè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€

### 3. å®‰å…¨æ€§åŸåˆ™
- **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»éªŒè¯å’Œæ¸…ç†
- **è¯·æ±‚é™åˆ¶**: å®æ–½åˆç†çš„APIé¢‘ç‡é™åˆ¶
- **é”™è¯¯å¤„ç†**: ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
- **æ•°æ®ä¿æŠ¤**: æœ€å°åŒ–æ•°æ®æ”¶é›†å’Œå­˜å‚¨

## ğŸ—ï¸ æ¶æ„è®¾è®¡è§„èŒƒ

### å‰ç«¯æ¶æ„
```
src/
â”œâ”€â”€ components/         # ç»„ä»¶åº“
â”‚   â”œâ”€â”€ ui/            # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ features/      # åŠŸèƒ½ç»„ä»¶
â”‚   â””â”€â”€ layout/        # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ stores/            # ZustandçŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/             # TypeScriptç±»å‹
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ locales/           # å›½é™…åŒ–æ–‡ä»¶
â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶
```

### åç«¯æ¶æ„
```
src/
â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ services/          # æœåŠ¡å±‚
â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”œâ”€â”€ types/             # TypeScriptç±»å‹
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â””â”€â”€ config/            # é…ç½®æ–‡ä»¶
```

## ğŸ’» æŠ€æœ¯æ ˆè¦æ±‚

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒ**: React 18+ + TypeScript + Vite
- **æ ·å¼**: Tailwind CSS + Headless UI
- **çŠ¶æ€ç®¡ç†**: Zustand
- **å›½é™…åŒ–**: react-i18next
- **å›¾æ ‡**: Font Awesome 6.5+
- **æ–‡ä»¶å¤„ç†**: xlsx + FileSaver.js

### åç«¯æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒ**: Node.js 18+ + Express + TypeScript
- **æ•°æ®è·å–**: Puppeteer
- **å®‰å…¨**: helmet + cors + express-rate-limit
- **æ–‡ä»¶å¤„ç†**: xlsx
- **å·¥å…·**: lodash + dayjs + uuid

## ğŸ¨ UI/UXè®¾è®¡è§„èŒƒ

### è®¾è®¡ç³»ç»Ÿ
- **é£æ ¼**: Linear Appç®€çº¦ + Instagramé…è‰² + Getsbiç°ä»£æ„Ÿ
- **è‰²å½©**: Instagramæ¸å˜è‰²ç³» + ä¸­æ€§è‰²è°ƒ
- **å­—ä½“**: Inter (ç³»ç»Ÿå­—ä½“é™çº§)
- **å›¾æ ‡**: Font Awesome (é¿å…ä½¿ç”¨emoji)

### å“åº”å¼æ–­ç‚¹
```css
/* ç§»åŠ¨ç«¯ä¼˜å…ˆ */
sm: 640px    /* å°å‹è®¾å¤‡ */
md: 768px    /* å¹³æ¿è®¾å¤‡ */
lg: 1024px   /* ç¬”è®°æœ¬ç”µè„‘ */
xl: 1280px   /* æ¡Œé¢æ˜¾ç¤ºå™¨ */
2xl: 1536px  /* å¤§å‹æ˜¾ç¤ºå™¨ */
```

### ç»„ä»¶è®¾è®¡åŸåˆ™
- **åŸå­åŒ–**: åŸºç¡€ç»„ä»¶èŒè´£å•ä¸€
- **ç»„åˆæ€§**: å¤æ‚ç»„ä»¶é€šè¿‡ç»„åˆæ„å»º
- **å¯å¤ç”¨**: é€šè¿‡propsæ§åˆ¶å˜ä½“å’ŒçŠ¶æ€
- **ç±»å‹å®‰å…¨**: ä¸¥æ ¼çš„TypeScriptæ¥å£å®šä¹‰

## ğŸ“ ä»£ç è§„èŒƒ

### å‘½åè§„èŒƒ
```typescript
// ç»„ä»¶: PascalCase
export const ExportForm: React.FC<ExportFormProps> = () => {}

// å˜é‡/å‡½æ•°: camelCase
const userName = 'example';
const handleSubmit = () => {};

// å¸¸é‡: SCREAMING_SNAKE_CASE
const MAX_EXPORT_COUNT = 200;

// ç±»å‹/æ¥å£: PascalCase
interface InstagramUser {
  id: string;
  userName: string;
}

// æ–‡ä»¶å: kebab-caseæˆ–PascalCase
export-form.component.tsx
ExportForm.tsx
```

### æ–‡ä»¶ç»„ç»‡è§„èŒƒ
```typescript
// 1. å¤–éƒ¨åº“å¯¼å…¥
import React from 'react';
import { useTranslation } from 'react-i18next';

// 2. å†…éƒ¨ç»„ä»¶å¯¼å…¥
import { Button } from '@/components/ui/Button';
import { Input } from '@/components/ui/Input';

// 3. ç±»å‹å¯¼å…¥
import type { ExportFormProps } from '@/types/export';

// 4. å·¥å…·å‡½æ•°å¯¼å…¥
import { validateUsername } from '@/utils/validation';

// 5. ç»„ä»¶å®ç°
export const ExportForm: React.FC<ExportFormProps> = ({ onSubmit }) => {
  // ç»„ä»¶é€»è¾‘
};
```

### TypeScriptè§„èŒƒ
```typescript
// ä¸¥æ ¼çš„æ¥å£å®šä¹‰
interface InstagramUser {
  id: string;
  userName: string;
  fullName: string;
  profileUrl: string;
  isVerified: boolean;
  followerCount?: number; // å¯é€‰å±æ€§ä½¿ç”¨?
}

// è”åˆç±»å‹
type ExportType = 'followers' | 'following';

// æ³›å‹ä½¿ç”¨
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
}

// ä¸¥æ ¼çš„å‡½æ•°ç­¾å
const exportUsers = async (
  username: string,
  type: ExportType
): Promise<ApiResponse<InstagramUser[]>> => {
  // å‡½æ•°å®ç°
};
```

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### ESLinté…ç½®
```json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off",
    "@typescript-eslint/no-unused-vars": "error",
    "prefer-const": "error",
    "no-var": "error"
  }
}
```

### Prettieré…ç½®
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

## ğŸ›¡ï¸ å®‰å…¨å¼€å‘è§„èŒƒ

### å‰ç«¯å®‰å…¨
- **XSSé˜²æŠ¤**: ä½¿ç”¨dangerouslySetInnerHTMLæ—¶å¿…é¡»å…ˆæ¸…ç†HTML
- **æ•°æ®éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥åœ¨å‰ç«¯å’Œåç«¯éƒ½è¦éªŒè¯
- **æ•æ„Ÿä¿¡æ¯**: ä¸åœ¨å‰ç«¯ä»£ç ä¸­å­˜å‚¨APIå¯†é’¥æˆ–æ•æ„Ÿæ•°æ®

### åç«¯å®‰å…¨
- **è¾“å…¥éªŒè¯**: ä½¿ç”¨ä¸“é—¨çš„éªŒè¯æœåŠ¡
- **è¯·æ±‚é™åˆ¶**: ä¸åŒAPIç«¯ç‚¹è®¾ç½®ä¸åŒçš„é¢‘ç‡é™åˆ¶
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼ï¼Œä¸æš´éœ²ç³»ç»Ÿä¿¡æ¯
- **æ—¥å¿—è®°å½•**: è®°å½•å…³é”®æ“ä½œå’Œé”™è¯¯ä¿¡æ¯

```typescript
// å®‰å…¨çš„è¾“å…¥éªŒè¯ç¤ºä¾‹
export class ValidationService {
  validateUsername(username: string): ValidationResult {
    // æ¸…ç†è¾“å…¥
    const cleanUsername = username.trim().toLowerCase();
    
    // æ ¼å¼éªŒè¯
    const usernameRegex = /^[a-zA-Z0-9._]{1,30}$/;
    if (!usernameRegex.test(cleanUsername)) {
      return { isValid: false, error: 'Invalid username format' };
    }
    
    return { isValid: true, cleanValue: cleanUsername };
  }
}
```

## ğŸŒ å›½é™…åŒ–è§„èŒƒ

### ç¿»è¯‘æ–‡ä»¶ç»“æ„
```json
{
  "common": {
    "loading": "Loading...",
    "error": "Error",
    "success": "Success"
  },
  "export": {
    "inputPlaceholder": "Enter Instagram username or URL",
    "exportButton": "Export (Max {{maxCount}} users)"
  }
}
```

### ä½¿ç”¨è§„èŒƒ
```typescript
// Hookä½¿ç”¨
const { t } = useTranslation();

// ç®€å•ç¿»è¯‘
<span>{t('common.loading')}</span>

// å¸¦å‚æ•°ç¿»è¯‘
<button>{t('export.exportButton', { maxCount: 200 })}</button>

// å¤æ•°å½¢å¼
<span>{t('users', { count: userCount })}</span>
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–è¦æ±‚

### å‰ç«¯æ€§èƒ½
- **ä»£ç åˆ†å‰²**: ä½¿ç”¨React.lazyå’Œdynamic imports
- **ç¼“å­˜ç­–ç•¥**: åˆç†ä½¿ç”¨useMemoå’ŒuseCallback
- **åŒ…ä½“ç§¯**: ç›‘æ§æ‰“åŒ…å¤§å°ï¼Œé¿å…ä¸å¿…è¦çš„ä¾èµ–
- **å›¾ç‰‡ä¼˜åŒ–**: ä½¿ç”¨WebPæ ¼å¼ï¼Œæ”¯æŒæ‡’åŠ è½½

### åç«¯æ€§èƒ½
- **å“åº”å‹ç¼©**: å¯ç”¨gzipå‹ç¼©
- **å†…å­˜ç®¡ç†**: åŠæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
- **è¿æ¥æ± **: å¤ç”¨æ•°æ®åº“è¿æ¥
- **å¼‚æ­¥å¤„ç†**: é•¿æ—¶é—´æ“ä½œä½¿ç”¨å¼‚æ­¥å¤„ç†

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•
```typescript
// ç»„ä»¶æµ‹è¯•ç¤ºä¾‹
describe('Button Component', () => {
  it('renders correctly with primary variant', () => {
    render(<Button variant="primary">Click me</Button>);
    expect(screen.getByRole('button')).toHaveClass('bg-gradient-to-r');
  });

  it('shows loading state when loading prop is true', () => {
    render(<Button loading>Submit</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
  });
});
```

### APIæµ‹è¯•
```typescript
// APIæ¥å£æµ‹è¯•ç¤ºä¾‹
describe('Export API', () => {
  it('should validate username before export', async () => {
    const response = await request(app)
      .post('/api/export/analyze')
      .send({ username: 'invalid-user!' });
    
    expect(response.status).toBe(400);
    expect(response.body.success).toBe(false);
  });
});
```

## ğŸš€ éƒ¨ç½²è§„èŒƒ

### ç¯å¢ƒé…ç½®
```bash
# å¼€å‘ç¯å¢ƒ
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000

# ç”Ÿäº§ç¯å¢ƒ
NODE_ENV=production
PORT=8080
CORS_ORIGIN=https://igexportguru.com
RATE_LIMIT_ENABLED=true
```

### æ„å»ºä¼˜åŒ–
```javascript
// Viteç”Ÿäº§æ„å»ºé…ç½®
export default defineConfig({
  build: {
    outDir: 'dist',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          ui: ['@headlessui/react'],
        },
      },
    },
  },
});
```

## ğŸ“ Gitå·¥ä½œæµè§„èŒƒ

### åˆ†æ”¯ç®¡ç†
- **main**: ä¸»åˆ†æ”¯ï¼Œå§‹ç»ˆä¿æŒå¯éƒ¨ç½²çŠ¶æ€
- **develop**: å¼€å‘åˆ†æ”¯ï¼ŒåŠŸèƒ½å¼€å‘åŸºç¡€åˆ†æ”¯
- **feature/***: åŠŸèƒ½åˆ†æ”¯ï¼Œä»developåˆ†å‡º
- **hotfix/***: çƒ­ä¿®å¤åˆ†æ”¯ï¼Œä»mainåˆ†å‡º

### æäº¤è§„èŒƒ
```bash
# æ ¼å¼: type(scope): description

feat(auth): add user authentication
fix(ui): resolve button loading state issue
docs(readme): update installation instructions
style(components): format code with prettier
refactor(api): restructure export service
test(utils): add validation utility tests
chore(deps): update dependencies
```

### PRè§„èŒƒ
- PRæ ‡é¢˜æ¸…æ™°æè¿°å˜æ›´å†…å®¹
- åŒ…å«ç›¸å…³issueé“¾æ¥
- é€šè¿‡æ‰€æœ‰è‡ªåŠ¨åŒ–æ£€æŸ¥
- è‡³å°‘ä¸€ä¸ªåŒäº‹reviewé€šè¿‡

## ğŸ” ä»£ç å®¡æŸ¥æ¸…å•

### åŠŸèƒ½æ€§æ£€æŸ¥
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰éœ€æ±‚æ­£ç¡®å®ç°
- [ ] è¾¹ç•Œæƒ…å†µæ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„
- [ ] æ€§èƒ½æ˜¯å¦æ»¡è¶³è¦æ±‚

### ä»£ç è´¨é‡æ£€æŸ¥
- [ ] ä»£ç æ˜¯å¦æ˜“è¯»æ˜“ç†è§£
- [ ] å‘½åæ˜¯å¦æœ‰æ„ä¹‰
- [ ] æ˜¯å¦å­˜åœ¨é‡å¤ä»£ç 
- [ ] æ˜¯å¦éµå¾ªé¡¹ç›®è§„èŒƒ

### å®‰å…¨æ€§æ£€æŸ¥
- [ ] è¾“å…¥æ˜¯å¦æ­£ç¡®éªŒè¯
- [ ] æ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] æƒé™æ§åˆ¶æ˜¯å¦æ­£ç¡®

### æµ‹è¯•è¦†ç›–æ£€æŸ¥
- [ ] æ˜¯å¦åŒ…å«å¿…è¦çš„å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•ç”¨ä¾‹æ˜¯å¦è¦†ç›–ä¸»è¦åœºæ™¯
- [ ] æ˜¯å¦åŒ…å«é”™è¯¯åœºæ™¯æµ‹è¯•
- [ ] æµ‹è¯•æ˜¯å¦èƒ½é€šè¿‡

## âš ï¸ å¼€å‘æ³¨æ„äº‹é¡¹

### å¿…é¡»éµå¾ªçš„è§„åˆ™
1. **æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡TypeScriptç±»å‹æ£€æŸ¥**
2. **æ‰€æœ‰UIç»„ä»¶å¿…é¡»æ”¯æŒå“åº”å¼è®¾è®¡**
3. **æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»è¿›è¡ŒéªŒè¯**
4. **æ‰€æœ‰APIæ¥å£å¿…é¡»åŒ…å«é”™è¯¯å¤„ç†**
5. **æ‰€æœ‰æ–‡æœ¬å†…å®¹å¿…é¡»æ”¯æŒå›½é™…åŒ–**

### ç¦æ­¢çš„è¡Œä¸º
1. **ç¦æ­¢ä½¿ç”¨anyç±»å‹ï¼ˆé™¤éç‰¹æ®Šæƒ…å†µï¼‰**
2. **ç¦æ­¢ç›´æ¥æ“ä½œDOMï¼ˆä½¿ç”¨Reactæ–¹å¼ï¼‰**
3. **ç¦æ­¢åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ–‡æœ¬ï¼ˆä½¿ç”¨i18nï¼‰**
4. **ç¦æ­¢å¿½ç•¥é”™è¯¯å¤„ç†**
5. **ç¦æ­¢æäº¤æœªæµ‹è¯•çš„ä»£ç **

### æ€§èƒ½è¦æ±‚
- é¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- é¡µé¢äº¤äº’å“åº” < 100ms
- ç§»åŠ¨ç«¯ä½“éªŒæµç•…
- æ”¯æŒç¦»çº¿è®¿é—®å…³é”®åŠŸèƒ½

### å…¼å®¹æ€§è¦æ±‚
- æ”¯æŒç°ä»£æµè§ˆå™¨ï¼ˆChrome 90+, Firefox 88+, Safari 14+ï¼‰
- æ”¯æŒç§»åŠ¨ç«¯æµè§ˆå™¨
- æ”¯æŒå±å¹•é˜…è¯»å™¨
- æ”¯æŒé”®ç›˜å¯¼èˆª

---

## ğŸ“ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜æ—¶çš„è§£å†³é¡ºåºï¼š
1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ï¼ˆ.cursor/rules/ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼‰
2. æ£€æŸ¥æŠ€æœ¯æ ˆå®˜æ–¹æ–‡æ¡£
3. æŸ¥çœ‹é¡¹ç›®å·²æœ‰çš„ç±»ä¼¼å®ç°
4. è¯¢é—®å›¢é˜Ÿæˆå‘˜
5. è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

*è¿™äº›è§„åˆ™æ˜¯é¡¹ç›®æˆåŠŸçš„å…³é”®ï¼Œæ¯ä½å¼€å‘è€…éƒ½å¿…é¡»ä¸¥æ ¼éµå¾ªã€‚*

*æœ€åæ›´æ–°: 2024å¹´12æœˆ*
*ç‰ˆæœ¬: v1.0*
